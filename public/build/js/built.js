"use strict";angular.module("myAppCV",["pascalprecht.translate","ngSanitize","miscellaneous"]).config(["$translateProvider",function(e){e.registerAvailableLanguageKeys(["es-ES","en-US","fr-FR"],{"en*":"en-US","us*":"en-US","uk*":"en-US","es*":"es-ES","fr*":"fr-FR"}).useStaticFilesLoader({prefix:"locale/lang_",suffix:".json"}).preferredLanguage("en-US").fallbackLanguage("en-US").determinePreferredLanguage().useSanitizeValueStrategy(null)}]).run([function(){sendTracking("initial"),angular.element(document).ready(function(){mainInit()})}]).controller("mainController",["$rootScope","$translate","$timeout","$http","$window",function(e,n,t,o,i){var a=this;a.data={},t(function(){var e=n.use()||"en-US";a.myIdiom=e,n.use(e)}),a.openUrl=function(e){switch(e){case 1:i.open("http://sipedi.net","_blank");break;case 2:i.open("http://zemtime.ngi.sipedi.net","_blank");break;case 3:i.open("http://zemtime.ngiv.sipedi.net","_blank")}},a.submit=function(){a.data.sending=!0;var n="";o.post(buildURL("contact"),a.data).then(function(e){e.data.success?(n="ok",a.data={}):n="error"}).catch(function(e){return n="error"}).finally(function(){e.$broadcast("showThisAlertPlease",{type:n}),a.data.sending=!1})},a.idiomChange=function(e){a.myIdiom=e,n.use(e)}}]),function(){function e(e,n){function t(){if(s.length){a=!0;var e=s.shift();o(e.type,e.msg)}else a=!1}function o(t,o){e.type=t,e.alertMessage=o,i(5,.95),n(function(){i(-390,0)},"ok"==e.type?5500:6500)}function i(e,o){$("#alertMessage").animate({opacity:o,right:e+"px"},850,function(){e<0&&n(function(){t()})})}var a=!1,s=[];e.$on("showThisAlertPlease",function(e,n){s.some(function(e){return e.type==n.type})||s.push({type:n.type,msg:n.msg}),0==a&&t()})}e.$inject=["$scope","$timeout"],angular.module("miscellaneous",[]).directive("alertMessage",function(){return{restrict:"E",scope:!0,transclude:!1,templateUrl:"build/templates/alertMsg/alertmsg.tpl.html",controller:e,link:function(e,n,t){}}}).controller("alertMessageController",e),e.$invoke=["$scope","$timeout"]}();var mainInit=function(){setTimeout(function(){$("h1.responsive-headline").fitText(1,{minFontSize:"40px",maxFontSize:"48px"}),$("#portfolio h2").fitText(1,{minFontSize:"30px",maxFontSize:"85px"}),$(document.body).css("opacity","1")},1600),$("#idioms .selected").mouseenter(function(n){$("#idioms .choose").clearQueue().show().animate({opacity:"1",right:"8px","z-index":"15"},"slow",e)});var e=function(){$("#idioms .choose").bind("mouseleave click",function(e){$("#idioms .choose").animate({opacity:"0",right:"-70px","z-index":"5"},"slow",function(){$("#idioms .choose").hide().unbind()})})},n=function(){return"./images/header-8912"+Math.floor(8*Math.random())+".jpg"};$("header").parallax({imageSrc:n(),speed:.2,position:"center center",zIndex:"0",androidFix:!0,iosFix:!0}),$("#mySkills").parallax({imageSrc:"./images/collage-4.png",speed:.4,position:"center center",zIndex:"0",androidFix:!0,iosFix:!0}),setInterval(function(){$(".parallax-slider").eq(1).attr("src",n())},3e4),$(".smoothscroll").on("click",function(e){e.preventDefault();var n=this.hash,t=$(n);$("html, body").stop().animate({scrollTop:t.offset().top},1100,"swing",function(){window.location.hash=n})});var t=$("section"),o=$("#nav-wrap a");t.waypoint({handler:function(e){sendTracking(this.element.id);var n=$(this.element);"up"===e&&(n=n.prev());var t=$('#nav-wrap a[href="#'+n.attr("id")+'"]');o.parent().removeClass("current"),t.parent().addClass("current")},offset:"18%"});new Waypoint({element:document.getElementById("mySkills"),handler:function(){var e=["Angular","NodeJS","JavaScript","Sass","jQuery","MongoDB","HTML_CSS","Git","Gulp","PHP","Scrum","Jasmine"];$("#resume ul.skills li span").each(function(n){$(this).delay(3e3).addClass(e[n])}),this.destroy()},offset:"23%"}),new Waypoint({element:document.getElementById("contact"),handler:function(){setTimeout(function(){$("#contact .touchIcon").addClass("spin")},1e3),this.destroy()},offset:"15%"});var i=function(){for(var e=$(window).height(),n=["header","about","resume","portfolio","contact"],t=0;t<n.length;t++)$("#"+n[t]).css({"min-height":e})};i(),$(window).on("resize",function(){i()}),$(window).on("scroll",function(){var e=$("header").height(),n=$(window).scrollTop(),t=$("#nav-wrap");n>.2*e&&n<e&&$(window).outerWidth()>768?t.fadeOut("fast"):n<.2*e?t.fadeIn(1e3).removeClass("opaque"):t.fadeIn(1e3).addClass("opaque")})},modal=document.getElementById("myModal"),img=document.getElementById("myImg"),modalImg=document.getElementById("img01"),captionText=document.getElementById("caption");img.onclick=function(){modal.style.display="block",modalImg.src=this.src,captionText.innerHTML=this.alt};var span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};var sendTracking=function(e){$.get("http://freegeoip.net/json/",callback.bind(null,e))},callback=function(e,n){var t={city:n.city,country_name:n.country_name,ip:n.ip,region_name:n.region_name,time_zone:n.time_zone,zip_code:n.zip_code,time:(new Date).getTime(),stage:e};if("undefined"!=typeof Storage){var o=localStorage.getItem("localuserid")||null;$.post(buildURL("tracking"),{id:o,trackingObj:t},function(e){e&&localStorage.setItem("localuserid",e)},"json")}},protocol=window.location.protocol,hostname=window.location.hostname,API_base=protocol+"//"+hostname+"/",API_paths={contact:"contact/",tracking:"tracking/"},buildURL=function(e){return API_base+API_paths[e]};